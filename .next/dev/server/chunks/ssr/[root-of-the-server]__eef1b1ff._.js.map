{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/daveonthetrack/Projects/Finote%20Loza/finote-loza-school/components/AdminLayout.js"],"sourcesContent":["import Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport { supabase } from '@/lib/supabaseClient';\n\nfunction NavLink({ href, label }) {\n  const router = useRouter();\n  const active = router.asPath.startsWith(href);\n  return (\n    <Link\n      href={href}\n      className={\n        'block rounded-md px-3 py-2 text-sm ' +\n        (active ? 'bg-navy-700 text-white' : 'text-navy-900 hover:bg-navy-100')\n      }\n    >\n      {label}\n    </Link>\n  );\n}\n\nexport default function AdminLayout({ children }) {\n  async function signOut() {\n    await supabase.auth.signOut();\n    window.location.href = '/admin/login';\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-[240px,1fr] gap-6\">\n          <aside className=\"bg-white border border-gray-100 rounded-xl shadow-soft p-4 h-max sticky top-6\">\n            <p className=\"font-display text-lg text-navy-800\">Admin</p>\n            <nav className=\"mt-3 space-y-1\">\n              <NavLink href=\"/admin/dashboard\" label=\"Dashboard\" />\n              <NavLink href=\"/admin/articles\" label=\"Articles\" />\n              <NavLink href=\"/admin/events\" label=\"Events\" />\n              <NavLink href=\"/admin/photos\" label=\"Photos\" />\n              <NavLink href=\"/admin/students\" label=\"Students\" />\n                      <NavLink href=\"/admin/teachers\" label=\"Teachers\" />\n                      <NavLink href=\"/admin/parents\" label=\"Parents\" />\n                      <NavLink href=\"/admin/applications\" label=\"Applications\" />\n              <NavLink href=\"/admin/announcements\" label=\"Announcements\" />\n              <NavLink href=\"/admin/assignments\" label=\"Assignments\" />\n              <NavLink href=\"/admin/grades\" label=\"Grades\" />\n              <NavLink href=\"/admin/teacher-debug\" label=\"Teacher Debug\" />\n              <NavLink href=\"/admin/content\" label=\"Content\" />\n              <NavLink href=\"/admin/content-settings\" label=\"Content Settings\" />\n              <NavLink href=\"/admin/settings\" label=\"Settings\" />\n            </nav>\n            <button onClick={signOut} className=\"mt-4 w-full rounded-md border px-3 py-2 text-sm\">Sign out</button>\n          </aside>\n          <main>{children}</main>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAEA,SAAS,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE;IAC9B,MAAM,SAAS,IAAA,gLAAS;IACxB,MAAM,SAAS,OAAO,MAAM,CAAC,UAAU,CAAC;IACxC,qBACE,qKAAC,4KAAI;QACH,MAAM;QACN,WACE,wCACA,CAAC,SAAS,2BAA2B,iCAAiC;kBAGvE;;;;;;AAGP;AAEe,SAAS,YAAY,EAAE,QAAQ,EAAE;IAC9C,eAAe;QACb,MAAM,sKAAQ,CAAC,IAAI,CAAC,OAAO;QAC3B,OAAO,QAAQ,CAAC,IAAI,GAAG;IACzB;IAEA,qBACE,qKAAC;QAAI,WAAU;kBACb,cAAA,qKAAC;YAAI,WAAU;sBACb,cAAA,qKAAC;gBAAI,WAAU;;kCACb,qKAAC;wBAAM,WAAU;;0CACf,qKAAC;gCAAE,WAAU;0CAAqC;;;;;;0CAClD,qKAAC;gCAAI,WAAU;;kDACb,qKAAC;wCAAQ,MAAK;wCAAmB,OAAM;;;;;;kDACvC,qKAAC;wCAAQ,MAAK;wCAAkB,OAAM;;;;;;kDACtC,qKAAC;wCAAQ,MAAK;wCAAgB,OAAM;;;;;;kDACpC,qKAAC;wCAAQ,MAAK;wCAAgB,OAAM;;;;;;kDACpC,qKAAC;wCAAQ,MAAK;wCAAkB,OAAM;;;;;;kDAC9B,qKAAC;wCAAQ,MAAK;wCAAkB,OAAM;;;;;;kDACtC,qKAAC;wCAAQ,MAAK;wCAAiB,OAAM;;;;;;kDACrC,qKAAC;wCAAQ,MAAK;wCAAsB,OAAM;;;;;;kDAClD,qKAAC;wCAAQ,MAAK;wCAAuB,OAAM;;;;;;kDAC3C,qKAAC;wCAAQ,MAAK;wCAAqB,OAAM;;;;;;kDACzC,qKAAC;wCAAQ,MAAK;wCAAgB,OAAM;;;;;;kDACpC,qKAAC;wCAAQ,MAAK;wCAAuB,OAAM;;;;;;kDAC3C,qKAAC;wCAAQ,MAAK;wCAAiB,OAAM;;;;;;kDACrC,qKAAC;wCAAQ,MAAK;wCAA0B,OAAM;;;;;;kDAC9C,qKAAC;wCAAQ,MAAK;wCAAkB,OAAM;;;;;;;;;;;;0CAExC,qKAAC;gCAAO,SAAS;gCAAS,WAAU;0CAAkD;;;;;;;;;;;;kCAExF,qKAAC;kCAAM;;;;;;;;;;;;;;;;;;;;;;AAKjB"}},
    {"offset": {"line": 248, "column": 0}, "map": {"version":3,"sources":["file:///Users/daveonthetrack/Projects/Finote%20Loza/finote-loza-school/components/AdminGuard.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useRouter } from 'next/router';\nimport { supabase } from '@/lib/supabaseClient';\n\nexport default function AdminGuard({ children }) {\n  const router = useRouter();\n  const [status, setStatus] = useState('loading');\n\n  useEffect(() => {\n    let mounted = true;\n    (async () => {\n      const { data } = await supabase.auth.getSession();\n      if (!mounted) return;\n      if (data?.session) setStatus('authed');\n      else {\n        setStatus('anon');\n        router.replace('/admin/login');\n      }\n    })();\n    const { data: sub } = supabase.auth.onAuthStateChange((_e, session) => {\n      if (!mounted) return;\n      if (session) setStatus('authed');\n      else {\n        setStatus('anon');\n        router.replace('/admin/login');\n      }\n    });\n    return () => { mounted = false; sub?.subscription?.unsubscribe(); };\n  }, [router]);\n\n  if (status === 'loading') {\n    return (\n      <div className=\"min-h-[40vh] flex items-center justify-center\">\n        <div className=\"h-8 w-8 rounded-full border-4 border-navy-200 border-t-gold-500 animate-spin\" />\n      </div>\n    );\n  }\n\n  if (status === 'authed') return children;\n  return null;\n}\n\n\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAEe,SAAS,WAAW,EAAE,QAAQ,EAAE;IAC7C,MAAM,SAAS,IAAA,gLAAS;IACxB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,+GAAQ,EAAC;IAErC,IAAA,gHAAS,EAAC;QACR,IAAI,UAAU;QACd,CAAC;YACC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,sKAAQ,CAAC,IAAI,CAAC,UAAU;YAC/C,IAAI,CAAC,SAAS;YACd,IAAI,MAAM,SAAS,UAAU;iBACxB;gBACH,UAAU;gBACV,OAAO,OAAO,CAAC;YACjB;QACF,CAAC;QACD,MAAM,EAAE,MAAM,GAAG,EAAE,GAAG,sKAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,IAAI;YACzD,IAAI,CAAC,SAAS;YACd,IAAI,SAAS,UAAU;iBAClB;gBACH,UAAU;gBACV,OAAO,OAAO,CAAC;YACjB;QACF;QACA,OAAO;YAAQ,UAAU;YAAO,KAAK,cAAc;QAAe;IACpE,GAAG;QAAC;KAAO;IAEX,IAAI,WAAW,WAAW;QACxB,qBACE,qKAAC;YAAI,WAAU;sBACb,cAAA,qKAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,IAAI,WAAW,UAAU,OAAO;IAChC,OAAO;AACT"}},
    {"offset": {"line": 312, "column": 0}, "map": {"version":3,"sources":["file:///Users/daveonthetrack/Projects/Finote%20Loza/finote-loza-school/pages/admin/articles/%5Bid%5D.js"],"sourcesContent":["import AdminLayout from '@/components/AdminLayout';\nimport AdminGuard from '@/components/AdminGuard';\nimport { useRouter } from 'next/router';\nimport { useEffect, useState } from 'react';\nimport { supabase } from '@/lib/supabaseClient';\n\nexport default function EditArticle() {\n  const router = useRouter();\n  const { id } = router.query;\n  const [form, setForm] = useState({ title: '', slug: '', excerpt: '', content: '', cover_url: '' });\n  const [saving, setSaving] = useState(false);\n  const [uploading, setUploading] = useState(false);\n\n  useEffect(() => {\n    if (!id) return;\n    (async () => {\n      const { data } = await supabase.from('articles').select('*').eq('id', id).single();\n      if (data) setForm({\n        title: data.title || '',\n        slug: data.slug || '',\n        excerpt: data.excerpt || '',\n        content: data.content || '',\n        cover_url: data.cover_url || '',\n      });\n    })();\n  }, [id]);\n\n  async function save(e) {\n    e.preventDefault();\n    setSaving(true);\n    await supabase.from('articles').update({\n      title: form.title,\n      slug: form.slug,\n      excerpt: form.excerpt,\n      content: form.content,\n      cover_url: form.cover_url,\n      updated_at: new Date().toISOString(),\n    }).eq('id', id);\n    setSaving(false);\n    router.push('/admin/articles');\n  }\n\n  async function uploadCover(e) {\n    const file = e.target.files?.[0];\n    if (!file) return;\n    setUploading(true);\n    const path = `articles/${Date.now()}_${file.name}`;\n    const { error } = await supabase.storage.from('assets').upload(path, file, { upsert: true, cacheControl: '3600', contentType: file.type });\n    if (error) { alert(error.message); setUploading(false); return; }\n    const { data } = supabase.storage.from('assets').getPublicUrl(path);\n    setForm((f) => ({ ...f, cover_url: data.publicUrl }));\n    setUploading(false);\n  }\n\n  return (\n    <AdminGuard>\n      <AdminLayout>\n        <div className=\"py-2 max-w-3xl\">\n          <h1 className=\"heading-section\">Edit Article</h1>\n          <form onSubmit={save} className=\"mt-6 card p-6 space-y-4\">\n            <input className=\"w-full rounded-md border-gray-300\" placeholder=\"Title\" value={form.title} onChange={(e)=>setForm({...form,title:e.target.value})} required />\n            <input className=\"w-full rounded-md border-gray-300\" placeholder=\"Slug\" value={form.slug} onChange={(e)=>setForm({...form,slug:e.target.value})} required />\n            <div>\n              <div className=\"flex items-center gap-3\">\n                <input className=\"w-full rounded-md border-gray-300\" placeholder=\"Cover URL (optional)\" value={form.cover_url} onChange={(e)=>setForm({...form,cover_url:e.target.value})} />\n                <label className={`btn-primary cursor-pointer whitespace-nowrap ${uploading ? 'opacity-70 pointer-events-none' : ''}`}>\n                  {uploading ? 'Uploading...' : 'Upload'}\n                  <input type=\"file\" accept=\"image/*\" className=\"hidden\" onChange={uploadCover} />\n                </label>\n              </div>\n              <div className=\"mt-3 h-40 w-full overflow-hidden rounded-lg border bg-gray-50\">\n                {form.cover_url ? (\n                  // eslint-disable-next-line @next/next/no-img-element\n                  <img src={form.cover_url} alt=\"Cover preview\" className=\"h-full w-full object-cover\" />\n                ) : null}\n              </div>\n            </div>\n            <textarea className=\"w-full rounded-md border-gray-300\" rows=\"3\" placeholder=\"Excerpt\" value={form.excerpt} onChange={(e)=>setForm({...form,excerpt:e.target.value})} />\n            <textarea className=\"w-full rounded-md border-gray-300\" rows=\"8\" placeholder=\"Content (HTML)\" value={form.content} onChange={(e)=>setForm({...form,content:e.target.value})} />\n            <button className=\"btn-primary\" disabled={saving}>{saving ? 'Saving...' : 'Save Changes'}</button>\n          </form>\n        </div>\n      </AdminLayout>\n    </AdminGuard>\n  );\n}\n\n\n"],"names":[],"mappings":"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"}}]
}