{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/daveonthetrack/Projects/Finote%20Loza/finote-loza-school/components/AdminLayout.js"],"sourcesContent":["import Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport { supabase } from '@/lib/supabaseClient';\n\nfunction NavLink({ href, label }) {\n  const router = useRouter();\n  const active = router.asPath.startsWith(href);\n  return (\n    <Link\n      href={href}\n      className={\n        'block rounded-md px-3 py-2 text-sm ' +\n        (active ? 'bg-navy-700 text-white' : 'text-navy-900 hover:bg-navy-100')\n      }\n    >\n      {label}\n    </Link>\n  );\n}\n\nexport default function AdminLayout({ children }) {\n  async function signOut() {\n    await supabase.auth.signOut();\n    window.location.href = '/admin/login';\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-[240px,1fr] gap-6\">\n          <aside className=\"bg-white border border-gray-100 rounded-xl shadow-soft p-4 h-max sticky top-6\">\n            <p className=\"font-display text-lg text-navy-800\">Admin</p>\n            <nav className=\"mt-3 space-y-1\">\n              <NavLink href=\"/admin/dashboard\" label=\"Dashboard\" />\n              <NavLink href=\"/admin/articles\" label=\"Articles\" />\n              <NavLink href=\"/admin/events\" label=\"Events\" />\n              <NavLink href=\"/admin/photos\" label=\"Photos\" />\n              <NavLink href=\"/admin/students\" label=\"Students\" />\n                      <NavLink href=\"/admin/teachers\" label=\"Teachers\" />\n                      <NavLink href=\"/admin/parents\" label=\"Parents\" />\n                      <NavLink href=\"/admin/applications\" label=\"Applications\" />\n              <NavLink href=\"/admin/announcements\" label=\"Announcements\" />\n              <NavLink href=\"/admin/assignments\" label=\"Assignments\" />\n              <NavLink href=\"/admin/grades\" label=\"Grades\" />\n              <NavLink href=\"/admin/teacher-debug\" label=\"Teacher Debug\" />\n              <NavLink href=\"/admin/content\" label=\"Content\" />\n              <NavLink href=\"/admin/content-settings\" label=\"Content Settings\" />\n              <NavLink href=\"/admin/settings\" label=\"Settings\" />\n            </nav>\n            <button onClick={signOut} className=\"mt-4 w-full rounded-md border px-3 py-2 text-sm\">Sign out</button>\n          </aside>\n          <main>{children}</main>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAEA,SAAS,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE;IAC9B,MAAM,SAAS,IAAA,gLAAS;IACxB,MAAM,SAAS,OAAO,MAAM,CAAC,UAAU,CAAC;IACxC,qBACE,qKAAC,4KAAI;QACH,MAAM;QACN,WACE,wCACA,CAAC,SAAS,2BAA2B,iCAAiC;kBAGvE;;;;;;AAGP;AAEe,SAAS,YAAY,EAAE,QAAQ,EAAE;IAC9C,eAAe;QACb,MAAM,sKAAQ,CAAC,IAAI,CAAC,OAAO;QAC3B,OAAO,QAAQ,CAAC,IAAI,GAAG;IACzB;IAEA,qBACE,qKAAC;QAAI,WAAU;kBACb,cAAA,qKAAC;YAAI,WAAU;sBACb,cAAA,qKAAC;gBAAI,WAAU;;kCACb,qKAAC;wBAAM,WAAU;;0CACf,qKAAC;gCAAE,WAAU;0CAAqC;;;;;;0CAClD,qKAAC;gCAAI,WAAU;;kDACb,qKAAC;wCAAQ,MAAK;wCAAmB,OAAM;;;;;;kDACvC,qKAAC;wCAAQ,MAAK;wCAAkB,OAAM;;;;;;kDACtC,qKAAC;wCAAQ,MAAK;wCAAgB,OAAM;;;;;;kDACpC,qKAAC;wCAAQ,MAAK;wCAAgB,OAAM;;;;;;kDACpC,qKAAC;wCAAQ,MAAK;wCAAkB,OAAM;;;;;;kDAC9B,qKAAC;wCAAQ,MAAK;wCAAkB,OAAM;;;;;;kDACtC,qKAAC;wCAAQ,MAAK;wCAAiB,OAAM;;;;;;kDACrC,qKAAC;wCAAQ,MAAK;wCAAsB,OAAM;;;;;;kDAClD,qKAAC;wCAAQ,MAAK;wCAAuB,OAAM;;;;;;kDAC3C,qKAAC;wCAAQ,MAAK;wCAAqB,OAAM;;;;;;kDACzC,qKAAC;wCAAQ,MAAK;wCAAgB,OAAM;;;;;;kDACpC,qKAAC;wCAAQ,MAAK;wCAAuB,OAAM;;;;;;kDAC3C,qKAAC;wCAAQ,MAAK;wCAAiB,OAAM;;;;;;kDACrC,qKAAC;wCAAQ,MAAK;wCAA0B,OAAM;;;;;;kDAC9C,qKAAC;wCAAQ,MAAK;wCAAkB,OAAM;;;;;;;;;;;;0CAExC,qKAAC;gCAAO,SAAS;gCAAS,WAAU;0CAAkD;;;;;;;;;;;;kCAExF,qKAAC;kCAAM;;;;;;;;;;;;;;;;;;;;;;AAKjB"}},
    {"offset": {"line": 248, "column": 0}, "map": {"version":3,"sources":["file:///Users/daveonthetrack/Projects/Finote%20Loza/finote-loza-school/components/AdminGuard.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useRouter } from 'next/router';\nimport { supabase } from '@/lib/supabaseClient';\n\nexport default function AdminGuard({ children }) {\n  const router = useRouter();\n  const [status, setStatus] = useState('loading');\n\n  useEffect(() => {\n    let mounted = true;\n    (async () => {\n      const { data } = await supabase.auth.getSession();\n      if (!mounted) return;\n      if (data?.session) setStatus('authed');\n      else {\n        setStatus('anon');\n        router.replace('/admin/login');\n      }\n    })();\n    const { data: sub } = supabase.auth.onAuthStateChange((_e, session) => {\n      if (!mounted) return;\n      if (session) setStatus('authed');\n      else {\n        setStatus('anon');\n        router.replace('/admin/login');\n      }\n    });\n    return () => { mounted = false; sub?.subscription?.unsubscribe(); };\n  }, [router]);\n\n  if (status === 'loading') {\n    return (\n      <div className=\"min-h-[40vh] flex items-center justify-center\">\n        <div className=\"h-8 w-8 rounded-full border-4 border-navy-200 border-t-gold-500 animate-spin\" />\n      </div>\n    );\n  }\n\n  if (status === 'authed') return children;\n  return null;\n}\n\n\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAEe,SAAS,WAAW,EAAE,QAAQ,EAAE;IAC7C,MAAM,SAAS,IAAA,gLAAS;IACxB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,+GAAQ,EAAC;IAErC,IAAA,gHAAS,EAAC;QACR,IAAI,UAAU;QACd,CAAC;YACC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,sKAAQ,CAAC,IAAI,CAAC,UAAU;YAC/C,IAAI,CAAC,SAAS;YACd,IAAI,MAAM,SAAS,UAAU;iBACxB;gBACH,UAAU;gBACV,OAAO,OAAO,CAAC;YACjB;QACF,CAAC;QACD,MAAM,EAAE,MAAM,GAAG,EAAE,GAAG,sKAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,IAAI;YACzD,IAAI,CAAC,SAAS;YACd,IAAI,SAAS,UAAU;iBAClB;gBACH,UAAU;gBACV,OAAO,OAAO,CAAC;YACjB;QACF;QACA,OAAO;YAAQ,UAAU;YAAO,KAAK,cAAc;QAAe;IACpE,GAAG;QAAC;KAAO;IAEX,IAAI,WAAW,WAAW;QACxB,qBACE,qKAAC;YAAI,WAAU;sBACb,cAAA,qKAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,IAAI,WAAW,UAAU,OAAO;IAChC,OAAO;AACT"}},
    {"offset": {"line": 312, "column": 0}, "map": {"version":3,"sources":["file:///Users/daveonthetrack/Projects/Finote%20Loza/finote-loza-school/components/Reveal.js"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\n\nexport default function Reveal({ children, type = 'fade-up', delay = 0, className = '' }) {\n  const ref = useRef(null);\n  const [visible, setVisible] = useState(false);\n\n  useEffect(() => {\n    if (!ref.current) return;\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting) {\n            setVisible(true);\n            observer.disconnect();\n          }\n        });\n      },\n      { rootMargin: '0px 0px -10% 0px', threshold: 0.15 }\n    );\n    observer.observe(ref.current);\n    return () => observer.disconnect();\n  }, []);\n\n  const animationClass = visible\n    ? type === 'slide-right'\n      ? 'animate-slide-in-right'\n      : 'animate-fade-up'\n    : 'opacity-0 translate-y-3';\n\n  return (\n    <div ref={ref} className={`${animationClass} ${className}`} style={{ animationDelay: visible ? `${delay}ms` : undefined }}>\n      {children}\n    </div>\n  );\n}\n\n\n"],"names":[],"mappings":";;;;;AAAA;;;AAEe,SAAS,OAAO,EAAE,QAAQ,EAAE,OAAO,SAAS,EAAE,QAAQ,CAAC,EAAE,YAAY,EAAE,EAAE;IACtF,MAAM,MAAM,IAAA,6GAAM,EAAC;IACnB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+GAAQ,EAAC;IAEvC,IAAA,gHAAS,EAAC;QACR,IAAI,CAAC,IAAI,OAAO,EAAE;QAClB,MAAM,WAAW,IAAI,qBACnB,CAAC;YACC,QAAQ,OAAO,CAAC,CAAC;gBACf,IAAI,MAAM,cAAc,EAAE;oBACxB,WAAW;oBACX,SAAS,UAAU;gBACrB;YACF;QACF,GACA;YAAE,YAAY;YAAoB,WAAW;QAAK;QAEpD,SAAS,OAAO,CAAC,IAAI,OAAO;QAC5B,OAAO,IAAM,SAAS,UAAU;IAClC,GAAG,EAAE;IAEL,MAAM,iBAAiB,UACnB,SAAS,gBACP,2BACA,oBACF;IAEJ,qBACE,qKAAC;QAAI,KAAK;QAAK,WAAW,GAAG,eAAe,CAAC,EAAE,WAAW;QAAE,OAAO;YAAE,gBAAgB,UAAU,GAAG,MAAM,EAAE,CAAC,GAAG;QAAU;kBACrH;;;;;;AAGP"}},
    {"offset": {"line": 357, "column": 0}, "map": {"version":3,"sources":["file:///Users/daveonthetrack/Projects/Finote%20Loza/finote-loza-school/pages/admin/parents/index.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport AdminLayout from '@/components/AdminLayout';\nimport AdminGuard from '@/components/AdminGuard';\nimport Reveal from '@/components/Reveal';\nimport { supabase } from '@/lib/supabaseClient';\n\nexport default function AdminParentsPage() {\n  const [parents, setParents] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showCreate, setShowCreate] = useState(false);\n  const [creating, setCreating] = useState(false);\n  const [linkingParentId, setLinkingParentId] = useState(null);\n  const [linkStudentId, setLinkStudentId] = useState('');\n  const [form, setForm] = useState({ first_name: '', last_name: '', email: '', phone: '' });\n  const [showBulk, setShowBulk] = useState(false);\n  const [bulkCsv, setBulkCsv] = useState('first_name,last_name,email,phone\\nJane,Doe,jane@example.com,\\nJohn,Smith,john@example.com,');\n  const [toast, setToast] = useState({ type: '', message: '' });\n\n  useEffect(() => {\n    loadParents();\n  }, []);\n\n  async function loadParents() {\n    setLoading(true);\n    try {\n      const res = await fetch('/api/admin/parents/list');\n      const json = await res.json();\n      if (!res.ok) throw new Error(json.error || 'Failed to load parents');\n      setParents(json.parents || []);\n    } catch (e) {\n      // eslint-disable-next-line no-alert\n      alert('Error loading parents: ' + e.message);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function handleCreateParent(e) {\n    e.preventDefault();\n    setCreating(true);\n    try {\n      const body = {\n        first_name: form.first_name.trim(),\n        last_name: form.last_name.trim(),\n        email: form.email.trim().toLowerCase(),\n        phone: form.phone.trim() || undefined\n      };\n      const res = await fetch('/api/register-parent', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(body)\n      });\n      if (!res.ok) {\n        const t = await res.text();\n        throw new Error(t || 'Failed to register parent');\n      }\n      setShowCreate(false);\n      setForm({ first_name: '', last_name: '', email: '', phone: '' });\n      await loadParents();\n      // eslint-disable-next-line no-alert\n      alert('Parent registered successfully');\n    } catch (e) {\n      // eslint-disable-next-line no-alert\n      alert('Error registering parent: ' + e.message);\n    } finally {\n      setCreating(false);\n    }\n  }\n\n  async function handleResetPassword(parent) {\n    const newPassword = window.prompt('Enter a new password for ' + parent.first_name + ' ' + parent.last_name);\n    if (!newPassword) return;\n    try {\n      const res = await fetch('/api/reset-parent-password', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ userId: parent.user_id, newPassword })\n      });\n      if (!res.ok) {\n        const t = await res.text();\n        throw new Error(t || 'Failed to reset password');\n      }\n      // eslint-disable-next-line no-alert\n      alert('Password reset successfully');\n    } catch (e) {\n      // eslint-disable-next-line no-alert\n      alert('Error resetting password: ' + e.message);\n    }\n  }\n\n  async function handleLinkStudent(parentId) {\n    if (!linkStudentId.trim()) return;\n    try {\n      // Lookup student by printed student_id\n      const res = await fetch('/api/admin/parents/link-student', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ parent_id: parentId, student_printed_id: linkStudentId.trim() })\n      });\n      const json = await res.json();\n      if (!res.ok) throw new Error(json.error || 'Failed to link student');\n      setLinkingParentId(null);\n      setLinkStudentId('');\n      // eslint-disable-next-line no-alert\n      alert('Linked student ' + json.student.first_name + ' ' + json.student.last_name);\n    } catch (e) {\n      // eslint-disable-next-line no-alert\n      alert('Error linking student: ' + e.message);\n    }\n  }\n\n  function showToast(type, message) {\n    setToast({ type, message });\n    setTimeout(() => setToast({ type: '', message: '' }), 2500);\n  }\n\n  function parseCsv(text) {\n    const lines = text.trim().split(/\\r?\\n/);\n    if (lines.length < 2) return [];\n    const headers = lines[0].split(',').map(h=>h.trim());\n    const out = [];\n    for (let i=1;i<lines.length;i++) {\n      const row = {};\n      const cols = lines[i].split(',');\n      headers.forEach((h, idx) => { row[h] = (cols[idx] || '').trim(); });\n      if (row.first_name && row.last_name && row.email) out.push(row);\n    }\n    return out;\n  }\n\n  async function handleBulkImport() {\n    try {\n      const parents = parseCsv(bulkCsv);\n      if (parents.length === 0) {\n        showToast('error','No valid rows found');\n        return;\n      }\n      const res = await fetch('/api/admin/parents/bulk-import', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ parents })\n      });\n      const json = await res.json();\n      if (!res.ok) throw new Error(json.error || 'Import failed');\n      showToast('success', `Imported ${json.imported} of ${parents.length}`);\n      setShowBulk(false);\n      await loadParents();\n    } catch (e) {\n      showToast('error', e.message);\n    }\n  }\n\n  return (\n    <AdminGuard>\n    <AdminLayout>\n      <div className=\"py-2\">\n        <Reveal>\n          <div className=\"flex items-center justify-between mb-6\">\n            <h1 className=\"text-2xl font-semibold text-gray-900\">Parents</h1>\n            <button\n              onClick={() => setShowCreate(true)}\n              className=\"bg-gold-600 hover:bg-gold-700 text-white px-4 py-2 rounded-lg font-medium transition\"\n            >\n              Register Parent\n            </button>\n            <button\n              onClick={() => setShowBulk(true)}\n              className=\"ml-2 bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-lg font-medium transition\"\n            >\n              Bulk Import\n            </button>\n          </div>\n        </Reveal>\n\n        {loading ? (\n          <div className=\"text-center py-12 text-gray-600\">Loading parents...</div>\n        ) : (\n          <div className=\"card overflow-hidden\">\n            <table className=\"w-full text-left\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-6 py-3 text-sm font-medium text-gray-500\">Parent</th>\n                  <th className=\"px-6 py-3 text-sm font-medium text-gray-500\">Email</th>\n                  <th className=\"px-6 py-3 text-sm font-medium text-gray-500\">Phone</th>\n                  <th className=\"px-6 py-3 text-sm font-medium text-gray-500\">Parent ID</th>\n                  <th className=\"px-6 py-3 text-sm font-medium text-gray-500\">Actions</th>\n                </tr>\n              </thead>\n              <tbody>\n                {parents.map((p) => (\n                  <tr key={p.id} className=\"border-t border-gray-200\">\n                    <td className=\"px-6 py-4\">\n                      <div className=\"font-medium\">{p.first_name} {p.last_name}</div>\n                      {(p.linked_students && p.linked_students.length > 0) && (\n                        <div className=\"mt-2 flex flex-wrap gap-2\">\n                          {(p.linked_students || []).map((s) => (\n                            <span key={s.id} className=\"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-gray-100 text-gray-700 text-xs\">\n                              {s.first_name} {s.last_name} ({s.student_id})\n                              <button\n                                aria-label=\"Unlink student\"\n                                onClick={async () => {\n                                  try {\n                                    const res = await fetch('/api/admin/parents/unlink-student', {\n                                      method: 'POST',\n                                      headers: { 'Content-Type': 'application/json' },\n                                      body: JSON.stringify({ parent_id: p.id, student_id: s.id })\n                                    });\n                                    const json = await res.json();\n                                    if (!res.ok) throw new Error(json.error || 'Failed to unlink');\n                                    await loadParents();\n                                  } catch (e) {\n                                    // eslint-disable-next-line no-alert\n                                    alert('Error unlinking: ' + e.message);\n                                  }\n                                }}\n                                className=\"ml-1 text-red-600 hover:text-red-800\"\n                              >\n                                <svg className=\"w-3 h-3\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\"/></svg>\n                              </button>\n                            </span>\n                          ))}\n                        </div>\n                      )}\n                    </td>\n                    <td className=\"px-6 py-4\">{p.email}</td>\n                    <td className=\"px-6 py-4\">{p.phone || '-'}</td>\n                    <td className=\"px-6 py-4\">{p.parent_id}</td>\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex flex-wrap gap-2 items-center\">\n                        <button\n                          onClick={() => handleResetPassword(p)}\n                          className=\"text-blue-600 hover:text-blue-800 text-sm\"\n                        >\n                          Reset Password\n                        </button>\n\n                        {linkingParentId === p.id ? (\n                          <div className=\"flex items-center gap-2 bg-gray-50 border rounded-md p-2\">\n                            <input\n                              type=\"text\"\n                              placeholder=\"Student ID (e.g., ST1234)\"\n                              className=\"rounded-md border-gray-300 text-sm\"\n                              value={linkStudentId}\n                              onChange={(e) => setLinkStudentId(e.target.value)}\n                            />\n                            <button\n                              onClick={() => handleLinkStudent(p.id)}\n                              className=\"bg-gold-600 hover:bg-gold-700 text-white px-3 py-1.5 rounded-md text-sm\"\n                            >\n                              Link\n                            </button>\n                            <button\n                              onClick={() => { setLinkingParentId(null); setLinkStudentId(''); }}\n                              className=\"text-gray-600 hover:text-gray-800 text-sm\"\n                            >\n                              Cancel\n                            </button>\n                          </div>\n                        ) : (\n                          <button\n                            onClick={() => setLinkingParentId(p.id)}\n                            className=\"px-3 py-1.5 rounded-md border border-gold-600 text-gold-700 hover:bg-gold-50 text-sm\"\n                          >\n                            Link Student\n                          </button>\n                        )}\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n\n            {parents.length === 0 && (\n              <div className=\"text-center py-12 text-gray-600\">No parents found.</div>\n            )}\n          </div>\n        )}\n\n        {showCreate && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n            <div className=\"bg-white rounded-lg shadow-xl max-w-md w-full\">\n              <div className=\"flex justify-between items-center border-b p-4\">\n                <h2 className=\"text-xl font-bold\">Register Parent</h2>\n                <button onClick={() => setShowCreate(false)} className=\"text-gray-500 hover:text-gray-700\">\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" /></svg>\n                </button>\n              </div>\n              <form onSubmit={handleCreateParent} className=\"p-6 space-y-4\">\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium mb-1\">First Name</label>\n                    <input\n                      className=\"w-full rounded-md border-gray-300\"\n                      value={form.first_name}\n                      onChange={(e) => setForm({ ...form, first_name: e.target.value })}\n                      required\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium mb-1\">Last Name</label>\n                    <input\n                      className=\"w-full rounded-md border-gray-300\"\n                      value={form.last_name}\n                      onChange={(e) => setForm({ ...form, last_name: e.target.value })}\n                      required\n                    />\n                  </div>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Email</label>\n                  <input\n                    type=\"email\"\n                    className=\"w-full rounded-md border-gray-300\"\n                    value={form.email}\n                    onChange={(e) => setForm({ ...form, email: e.target.value })}\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium mb-1\">Phone (optional)</label>\n                  <input\n                    className=\"w-full rounded-md border-gray-300\"\n                    value={form.phone}\n                    onChange={(e) => setForm({ ...form, phone: e.target.value })}\n                  />\n                </div>\n                <div className=\"flex gap-3 pt-4\">\n                  <button\n                    type=\"submit\"\n                    className=\"bg-gold-600 hover:bg-gold-700 text-white px-4 py-2 rounded-lg font-medium transition flex-1\"\n                    disabled={creating}\n                  >\n                    {creating ? 'Registering...' : 'Register Parent'}\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowCreate(false)}\n                    className=\"bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2 rounded-lg font-medium transition flex-1\"\n                  >\n                    Cancel\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        )}\n      </div>\n      {/* Bulk Import Modal */}\n      {showBulk && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white rounded-lg shadow-xl max-w-2xl w-full\">\n            <div className=\"flex justify-between items-center border-b p-4\">\n              <h2 className=\"text-xl font-bold\">Bulk Import Parents (CSV)</h2>\n              <button onClick={() => setShowBulk(false)} className=\"text-gray-500 hover:text-gray-700\">\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" /></svg>\n              </button>\n            </div>\n            <div className=\"p-6 space-y-4\">\n              <p className=\"text-sm text-gray-600\">Paste CSV with headers: first_name,last_name,email,phone</p>\n              <textarea className=\"w-full rounded-md border-gray-300\" rows={10} value={bulkCsv} onChange={(e)=>setBulkCsv(e.target.value)} />\n              <div className=\"flex justify-end gap-2\">\n                <button onClick={()=>setShowBulk(false)} className=\"px-4 py-2 rounded-md border text-sm\">Cancel</button>\n                <a\n                  href={`data:text/csv;charset=utf-8,${encodeURIComponent('first_name,last_name,email,phone\\nJane,Doe,jane@example.com,\\nJohn,Smith,john@example.com,')}`}\n                  download=\"parents_template.csv\"\n                  className=\"px-4 py-2 rounded-md border text-sm\"\n                >\n                  Download Template\n                </a>\n                <button onClick={handleBulkImport} className=\"px-4 py-2 rounded-md bg-gold-600 text-white text-sm\">Import</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n      {/* Toast */}\n      {toast.message && (\n        <div className={`fixed bottom-6 right-6 px-4 py-3 rounded-md shadow-lg text-sm ${toast.type==='success'?'bg-green-600 text-white':'bg-red-600 text-white'}`}>{toast.message}</div>\n      )}\n    </AdminLayout>\n    </AdminGuard>\n  );\n}\n\n \n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;;;;;;;AAEe,SAAS;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+GAAQ,EAAC,EAAE;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+GAAQ,EAAC;IACvC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,+GAAQ,EAAC;IAC7C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,+GAAQ,EAAC;IACzC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,+GAAQ,EAAC;IACvD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,+GAAQ,EAAC;IACnD,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,+GAAQ,EAAC;QAAE,YAAY;QAAI,WAAW;QAAI,OAAO;QAAI,OAAO;IAAG;IACvF,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,+GAAQ,EAAC;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+GAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+GAAQ,EAAC;QAAE,MAAM;QAAI,SAAS;IAAG;IAE3D,IAAA,gHAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,eAAe;QACb,WAAW;QACX,IAAI;YACF,MAAM,MAAM,MAAM,MAAM;YACxB,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,KAAK,KAAK,IAAI;YAC3C,WAAW,KAAK,OAAO,IAAI,EAAE;QAC/B,EAAE,OAAO,GAAG;YACV,oCAAoC;YACpC,MAAM,4BAA4B,EAAE,OAAO;QAC7C,SAAU;YACR,WAAW;QACb;IACF;IAEA,eAAe,mBAAmB,CAAC;QACjC,EAAE,cAAc;QAChB,YAAY;QACZ,IAAI;YACF,MAAM,OAAO;gBACX,YAAY,KAAK,UAAU,CAAC,IAAI;gBAChC,WAAW,KAAK,SAAS,CAAC,IAAI;gBAC9B,OAAO,KAAK,KAAK,CAAC,IAAI,GAAG,WAAW;gBACpC,OAAO,KAAK,KAAK,CAAC,IAAI,MAAM;YAC9B;YACA,MAAM,MAAM,MAAM,MAAM,wBAAwB;gBAC9C,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;YACvB;YACA,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,MAAM,IAAI,MAAM,IAAI,IAAI;gBACxB,MAAM,IAAI,MAAM,KAAK;YACvB;YACA,cAAc;YACd,QAAQ;gBAAE,YAAY;gBAAI,WAAW;gBAAI,OAAO;gBAAI,OAAO;YAAG;YAC9D,MAAM;YACN,oCAAoC;YACpC,MAAM;QACR,EAAE,OAAO,GAAG;YACV,oCAAoC;YACpC,MAAM,+BAA+B,EAAE,OAAO;QAChD,SAAU;YACR,YAAY;QACd;IACF;IAEA,eAAe,oBAAoB,MAAM;QACvC,MAAM,cAAc,OAAO,MAAM,CAAC,8BAA8B,OAAO,UAAU,GAAG,MAAM,OAAO,SAAS;QAC1G,IAAI,CAAC,aAAa;QAClB,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,8BAA8B;gBACpD,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,QAAQ,OAAO,OAAO;oBAAE;gBAAY;YAC7D;YACA,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,MAAM,IAAI,MAAM,IAAI,IAAI;gBACxB,MAAM,IAAI,MAAM,KAAK;YACvB;YACA,oCAAoC;YACpC,MAAM;QACR,EAAE,OAAO,GAAG;YACV,oCAAoC;YACpC,MAAM,+BAA+B,EAAE,OAAO;QAChD;IACF;IAEA,eAAe,kBAAkB,QAAQ;QACvC,IAAI,CAAC,cAAc,IAAI,IAAI;QAC3B,IAAI;YACF,uCAAuC;YACvC,MAAM,MAAM,MAAM,MAAM,mCAAmC;gBACzD,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,WAAW;oBAAU,oBAAoB,cAAc,IAAI;gBAAG;YACvF;YACA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,KAAK,KAAK,IAAI;YAC3C,mBAAmB;YACnB,iBAAiB;YACjB,oCAAoC;YACpC,MAAM,oBAAoB,KAAK,OAAO,CAAC,UAAU,GAAG,MAAM,KAAK,OAAO,CAAC,SAAS;QAClF,EAAE,OAAO,GAAG;YACV,oCAAoC;YACpC,MAAM,4BAA4B,EAAE,OAAO;QAC7C;IACF;IAEA,SAAS,UAAU,IAAI,EAAE,OAAO;QAC9B,SAAS;YAAE;YAAM;QAAQ;QACzB,WAAW,IAAM,SAAS;gBAAE,MAAM;gBAAI,SAAS;YAAG,IAAI;IACxD;IAEA,SAAS,SAAS,IAAI;QACpB,MAAM,QAAQ,KAAK,IAAI,GAAG,KAAK,CAAC;QAChC,IAAI,MAAM,MAAM,GAAG,GAAG,OAAO,EAAE;QAC/B,MAAM,UAAU,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAA,IAAG,EAAE,IAAI;QACjD,MAAM,MAAM,EAAE;QACd,IAAK,IAAI,IAAE,GAAE,IAAE,MAAM,MAAM,EAAC,IAAK;YAC/B,MAAM,MAAM,CAAC;YACb,MAAM,OAAO,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC;YAC5B,QAAQ,OAAO,CAAC,CAAC,GAAG;gBAAU,GAAG,CAAC,EAAE,GAAG,CAAC,IAAI,CAAC,IAAI,IAAI,EAAE,EAAE,IAAI;YAAI;YACjE,IAAI,IAAI,UAAU,IAAI,IAAI,SAAS,IAAI,IAAI,KAAK,EAAE,IAAI,IAAI,CAAC;QAC7D;QACA,OAAO;IACT;IAEA,eAAe;QACb,IAAI;YACF,MAAM,UAAU,SAAS;YACzB,IAAI,QAAQ,MAAM,KAAK,GAAG;gBACxB,UAAU,SAAQ;gBAClB;YACF;YACA,MAAM,MAAM,MAAM,MAAM,kCAAkC;gBACxD,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE;gBAAQ;YACjC;YACA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,KAAK,KAAK,IAAI;YAC3C,UAAU,WAAW,CAAC,SAAS,EAAE,KAAK,QAAQ,CAAC,IAAI,EAAE,QAAQ,MAAM,EAAE;YACrE,YAAY;YACZ,MAAM;QACR,EAAE,OAAO,GAAG;YACV,UAAU,SAAS,EAAE,OAAO;QAC9B;IACF;IAEA,qBACE,qKAAC,wKAAU;kBACX,cAAA,qKAAC,yKAAW;;8BACV,qKAAC;oBAAI,WAAU;;sCACb,qKAAC,oKAAM;sCACL,cAAA,qKAAC;gCAAI,WAAU;;kDACb,qKAAC;wCAAG,WAAU;kDAAuC;;;;;;kDACrD,qKAAC;wCACC,SAAS,IAAM,cAAc;wCAC7B,WAAU;kDACX;;;;;;kDAGD,qKAAC;wCACC,SAAS,IAAM,YAAY;wCAC3B,WAAU;kDACX;;;;;;;;;;;;;;;;;wBAMJ,wBACC,qKAAC;4BAAI,WAAU;sCAAkC;;;;;iDAEjD,qKAAC;4BAAI,WAAU;;8CACb,qKAAC;oCAAM,WAAU;;sDACf,qKAAC;4CAAM,WAAU;sDACf,cAAA,qKAAC;;kEACC,qKAAC;wDAAG,WAAU;kEAA8C;;;;;;kEAC5D,qKAAC;wDAAG,WAAU;kEAA8C;;;;;;kEAC5D,qKAAC;wDAAG,WAAU;kEAA8C;;;;;;kEAC5D,qKAAC;wDAAG,WAAU;kEAA8C;;;;;;kEAC5D,qKAAC;wDAAG,WAAU;kEAA8C;;;;;;;;;;;;;;;;;sDAGhE,qKAAC;sDACE,QAAQ,GAAG,CAAC,CAAC,kBACZ,qKAAC;oDAAc,WAAU;;sEACvB,qKAAC;4DAAG,WAAU;;8EACZ,qKAAC;oEAAI,WAAU;;wEAAe,EAAE,UAAU;wEAAC;wEAAE,EAAE,SAAS;;;;;;;gEACtD,EAAE,eAAe,IAAI,EAAE,eAAe,CAAC,MAAM,GAAG,mBAChD,qKAAC;oEAAI,WAAU;8EACZ,CAAC,EAAE,eAAe,IAAI,EAAE,EAAE,GAAG,CAAC,CAAC,kBAC9B,qKAAC;4EAAgB,WAAU;;gFACxB,EAAE,UAAU;gFAAC;gFAAE,EAAE,SAAS;gFAAC;gFAAG,EAAE,UAAU;gFAAC;8FAC5C,qKAAC;oFACC,cAAW;oFACX,SAAS;wFACP,IAAI;4FACF,MAAM,MAAM,MAAM,MAAM,qCAAqC;gGAC3D,QAAQ;gGACR,SAAS;oGAAE,gBAAgB;gGAAmB;gGAC9C,MAAM,KAAK,SAAS,CAAC;oGAAE,WAAW,EAAE,EAAE;oGAAE,YAAY,EAAE,EAAE;gGAAC;4FAC3D;4FACA,MAAM,OAAO,MAAM,IAAI,IAAI;4FAC3B,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,KAAK,KAAK,IAAI;4FAC3C,MAAM;wFACR,EAAE,OAAO,GAAG;4FACV,oCAAoC;4FACpC,MAAM,sBAAsB,EAAE,OAAO;wFACvC;oFACF;oFACA,WAAU;8FAEV,cAAA,qKAAC;wFAAI,WAAU;wFAAU,SAAQ;wFAAY,MAAK;wFAAO,QAAO;kGAAe,cAAA,qKAAC;4FAAK,eAAc;4FAAQ,gBAAe;4FAAQ,aAAY;4FAAI,GAAE;;;;;;;;;;;;;;;;;2EArB7I,EAAE,EAAE;;;;;;;;;;;;;;;;sEA4BvB,qKAAC;4DAAG,WAAU;sEAAa,EAAE,KAAK;;;;;;sEAClC,qKAAC;4DAAG,WAAU;sEAAa,EAAE,KAAK,IAAI;;;;;;sEACtC,qKAAC;4DAAG,WAAU;sEAAa,EAAE,SAAS;;;;;;sEACtC,qKAAC;4DAAG,WAAU;sEACZ,cAAA,qKAAC;gEAAI,WAAU;;kFACb,qKAAC;wEACC,SAAS,IAAM,oBAAoB;wEACnC,WAAU;kFACX;;;;;;oEAIA,oBAAoB,EAAE,EAAE,iBACvB,qKAAC;wEAAI,WAAU;;0FACb,qKAAC;gFACC,MAAK;gFACL,aAAY;gFACZ,WAAU;gFACV,OAAO;gFACP,UAAU,CAAC,IAAM,iBAAiB,EAAE,MAAM,CAAC,KAAK;;;;;;0FAElD,qKAAC;gFACC,SAAS,IAAM,kBAAkB,EAAE,EAAE;gFACrC,WAAU;0FACX;;;;;;0FAGD,qKAAC;gFACC,SAAS;oFAAQ,mBAAmB;oFAAO,iBAAiB;gFAAK;gFACjE,WAAU;0FACX;;;;;;;;;;;6FAKH,qKAAC;wEACC,SAAS,IAAM,mBAAmB,EAAE,EAAE;wEACtC,WAAU;kFACX;;;;;;;;;;;;;;;;;;mDAxEA,EAAE,EAAE;;;;;;;;;;;;;;;;gCAmFlB,QAAQ,MAAM,KAAK,mBAClB,qKAAC;oCAAI,WAAU;8CAAkC;;;;;;;;;;;;wBAKtD,4BACC,qKAAC;4BAAI,WAAU;sCACb,cAAA,qKAAC;gCAAI,WAAU;;kDACb,qKAAC;wCAAI,WAAU;;0DACb,qKAAC;gDAAG,WAAU;0DAAoB;;;;;;0DAClC,qKAAC;gDAAO,SAAS,IAAM,cAAc;gDAAQ,WAAU;0DACrD,cAAA,qKAAC;oDAAI,WAAU;oDAAU,MAAK;oDAAO,QAAO;oDAAe,SAAQ;8DAAY,cAAA,qKAAC;wDAAK,eAAc;wDAAQ,gBAAe;wDAAQ,aAAa;wDAAG,GAAE;;;;;;;;;;;;;;;;;;;;;;kDAGxJ,qKAAC;wCAAK,UAAU;wCAAoB,WAAU;;0DAC5C,qKAAC;gDAAI,WAAU;;kEACb,qKAAC;;0EACC,qKAAC;gEAAM,WAAU;0EAAiC;;;;;;0EAClD,qKAAC;gEACC,WAAU;gEACV,OAAO,KAAK,UAAU;gEACtB,UAAU,CAAC,IAAM,QAAQ;wEAAE,GAAG,IAAI;wEAAE,YAAY,EAAE,MAAM,CAAC,KAAK;oEAAC;gEAC/D,QAAQ;;;;;;;;;;;;kEAGZ,qKAAC;;0EACC,qKAAC;gEAAM,WAAU;0EAAiC;;;;;;0EAClD,qKAAC;gEACC,WAAU;gEACV,OAAO,KAAK,SAAS;gEACrB,UAAU,CAAC,IAAM,QAAQ;wEAAE,GAAG,IAAI;wEAAE,WAAW,EAAE,MAAM,CAAC,KAAK;oEAAC;gEAC9D,QAAQ;;;;;;;;;;;;;;;;;;0DAId,qKAAC;;kEACC,qKAAC;wDAAM,WAAU;kEAAiC;;;;;;kEAClD,qKAAC;wDACC,MAAK;wDACL,WAAU;wDACV,OAAO,KAAK,KAAK;wDACjB,UAAU,CAAC,IAAM,QAAQ;gEAAE,GAAG,IAAI;gEAAE,OAAO,EAAE,MAAM,CAAC,KAAK;4DAAC;wDAC1D,QAAQ;;;;;;;;;;;;0DAGZ,qKAAC;;kEACC,qKAAC;wDAAM,WAAU;kEAAiC;;;;;;kEAClD,qKAAC;wDACC,WAAU;wDACV,OAAO,KAAK,KAAK;wDACjB,UAAU,CAAC,IAAM,QAAQ;gEAAE,GAAG,IAAI;gEAAE,OAAO,EAAE,MAAM,CAAC,KAAK;4DAAC;;;;;;;;;;;;0DAG9D,qKAAC;gDAAI,WAAU;;kEACb,qKAAC;wDACC,MAAK;wDACL,WAAU;wDACV,UAAU;kEAET,WAAW,mBAAmB;;;;;;kEAEjC,qKAAC;wDACC,MAAK;wDACL,SAAS,IAAM,cAAc;wDAC7B,WAAU;kEACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gBAUZ,0BACC,qKAAC;oBAAI,WAAU;8BACb,cAAA,qKAAC;wBAAI,WAAU;;0CACb,qKAAC;gCAAI,WAAU;;kDACb,qKAAC;wCAAG,WAAU;kDAAoB;;;;;;kDAClC,qKAAC;wCAAO,SAAS,IAAM,YAAY;wCAAQ,WAAU;kDACnD,cAAA,qKAAC;4CAAI,WAAU;4CAAU,MAAK;4CAAO,QAAO;4CAAe,SAAQ;sDAAY,cAAA,qKAAC;gDAAK,eAAc;gDAAQ,gBAAe;gDAAQ,aAAa;gDAAG,GAAE;;;;;;;;;;;;;;;;;;;;;;0CAGxJ,qKAAC;gCAAI,WAAU;;kDACb,qKAAC;wCAAE,WAAU;kDAAwB;;;;;;kDACrC,qKAAC;wCAAS,WAAU;wCAAoC,MAAM;wCAAI,OAAO;wCAAS,UAAU,CAAC,IAAI,WAAW,EAAE,MAAM,CAAC,KAAK;;;;;;kDAC1H,qKAAC;wCAAI,WAAU;;0DACb,qKAAC;gDAAO,SAAS,IAAI,YAAY;gDAAQ,WAAU;0DAAsC;;;;;;0DACzF,qKAAC;gDACC,MAAM,CAAC,4BAA4B,EAAE,mBAAmB,+FAA+F;gDACvJ,UAAS;gDACT,WAAU;0DACX;;;;;;0DAGD,qKAAC;gDAAO,SAAS;gDAAkB,WAAU;0DAAsD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gBAO5G,MAAM,OAAO,kBACZ,qKAAC;oBAAI,WAAW,CAAC,8DAA8D,EAAE,MAAM,IAAI,KAAG,YAAU,4BAA0B,yBAAyB;8BAAG,MAAM,OAAO;;;;;;;;;;;;;;;;;AAKnL"}}]
}