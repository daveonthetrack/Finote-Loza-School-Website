{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/daveonthetrack/Projects/Finote%20Loza/finote-loza-school/components/AdminLayout.js"],"sourcesContent":["import Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport { supabase } from '@/lib/supabaseClient';\n\nfunction NavLink({ href, label }) {\n  const router = useRouter();\n  const active = router.asPath.startsWith(href);\n  return (\n    <Link\n      href={href}\n      className={\n        'block rounded-md px-3 py-2 text-sm ' +\n        (active ? 'bg-navy-700 text-white' : 'text-navy-900 hover:bg-navy-100')\n      }\n    >\n      {label}\n    </Link>\n  );\n}\n\nexport default function AdminLayout({ children }) {\n  async function signOut() {\n    await supabase.auth.signOut();\n    window.location.href = '/admin/login';\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-[240px,1fr] gap-6\">\n          <aside className=\"bg-white border border-gray-100 rounded-xl shadow-soft p-4 h-max sticky top-6\">\n            <p className=\"font-display text-lg text-navy-800\">Admin</p>\n            <nav className=\"mt-3 space-y-1\">\n              <NavLink href=\"/admin/dashboard\" label=\"Dashboard\" />\n              <NavLink href=\"/admin/articles\" label=\"Articles\" />\n              <NavLink href=\"/admin/events\" label=\"Events\" />\n              <NavLink href=\"/admin/photos\" label=\"Photos\" />\n              <NavLink href=\"/admin/students\" label=\"Students\" />\n                      <NavLink href=\"/admin/teachers\" label=\"Teachers\" />\n                      <NavLink href=\"/admin/parents\" label=\"Parents\" />\n                      <NavLink href=\"/admin/applications\" label=\"Applications\" />\n              <NavLink href=\"/admin/announcements\" label=\"Announcements\" />\n              <NavLink href=\"/admin/assignments\" label=\"Assignments\" />\n              <NavLink href=\"/admin/grades\" label=\"Grades\" />\n              <NavLink href=\"/admin/teacher-debug\" label=\"Teacher Debug\" />\n              <NavLink href=\"/admin/content\" label=\"Content\" />\n              <NavLink href=\"/admin/content-settings\" label=\"Content Settings\" />\n              <NavLink href=\"/admin/settings\" label=\"Settings\" />\n            </nav>\n            <button onClick={signOut} className=\"mt-4 w-full rounded-md border px-3 py-2 text-sm\">Sign out</button>\n          </aside>\n          <main>{children}</main>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAEA,SAAS,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE;IAC9B,MAAM,SAAS,IAAA,gLAAS;IACxB,MAAM,SAAS,OAAO,MAAM,CAAC,UAAU,CAAC;IACxC,qBACE,qKAAC,4KAAI;QACH,MAAM;QACN,WACE,wCACA,CAAC,SAAS,2BAA2B,iCAAiC;kBAGvE;;;;;;AAGP;AAEe,SAAS,YAAY,EAAE,QAAQ,EAAE;IAC9C,eAAe;QACb,MAAM,sKAAQ,CAAC,IAAI,CAAC,OAAO;QAC3B,OAAO,QAAQ,CAAC,IAAI,GAAG;IACzB;IAEA,qBACE,qKAAC;QAAI,WAAU;kBACb,cAAA,qKAAC;YAAI,WAAU;sBACb,cAAA,qKAAC;gBAAI,WAAU;;kCACb,qKAAC;wBAAM,WAAU;;0CACf,qKAAC;gCAAE,WAAU;0CAAqC;;;;;;0CAClD,qKAAC;gCAAI,WAAU;;kDACb,qKAAC;wCAAQ,MAAK;wCAAmB,OAAM;;;;;;kDACvC,qKAAC;wCAAQ,MAAK;wCAAkB,OAAM;;;;;;kDACtC,qKAAC;wCAAQ,MAAK;wCAAgB,OAAM;;;;;;kDACpC,qKAAC;wCAAQ,MAAK;wCAAgB,OAAM;;;;;;kDACpC,qKAAC;wCAAQ,MAAK;wCAAkB,OAAM;;;;;;kDAC9B,qKAAC;wCAAQ,MAAK;wCAAkB,OAAM;;;;;;kDACtC,qKAAC;wCAAQ,MAAK;wCAAiB,OAAM;;;;;;kDACrC,qKAAC;wCAAQ,MAAK;wCAAsB,OAAM;;;;;;kDAClD,qKAAC;wCAAQ,MAAK;wCAAuB,OAAM;;;;;;kDAC3C,qKAAC;wCAAQ,MAAK;wCAAqB,OAAM;;;;;;kDACzC,qKAAC;wCAAQ,MAAK;wCAAgB,OAAM;;;;;;kDACpC,qKAAC;wCAAQ,MAAK;wCAAuB,OAAM;;;;;;kDAC3C,qKAAC;wCAAQ,MAAK;wCAAiB,OAAM;;;;;;kDACrC,qKAAC;wCAAQ,MAAK;wCAA0B,OAAM;;;;;;kDAC9C,qKAAC;wCAAQ,MAAK;wCAAkB,OAAM;;;;;;;;;;;;0CAExC,qKAAC;gCAAO,SAAS;gCAAS,WAAU;0CAAkD;;;;;;;;;;;;kCAExF,qKAAC;kCAAM;;;;;;;;;;;;;;;;;;;;;;AAKjB"}},
    {"offset": {"line": 248, "column": 0}, "map": {"version":3,"sources":["file:///Users/daveonthetrack/Projects/Finote%20Loza/finote-loza-school/components/AdminGuard.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useRouter } from 'next/router';\nimport { supabase } from '@/lib/supabaseClient';\n\nexport default function AdminGuard({ children }) {\n  const router = useRouter();\n  const [status, setStatus] = useState('loading');\n\n  useEffect(() => {\n    let mounted = true;\n    (async () => {\n      const { data } = await supabase.auth.getSession();\n      if (!mounted) return;\n      if (data?.session) setStatus('authed');\n      else {\n        setStatus('anon');\n        router.replace('/admin/login');\n      }\n    })();\n    const { data: sub } = supabase.auth.onAuthStateChange((_e, session) => {\n      if (!mounted) return;\n      if (session) setStatus('authed');\n      else {\n        setStatus('anon');\n        router.replace('/admin/login');\n      }\n    });\n    return () => { mounted = false; sub?.subscription?.unsubscribe(); };\n  }, [router]);\n\n  if (status === 'loading') {\n    return (\n      <div className=\"min-h-[40vh] flex items-center justify-center\">\n        <div className=\"h-8 w-8 rounded-full border-4 border-navy-200 border-t-gold-500 animate-spin\" />\n      </div>\n    );\n  }\n\n  if (status === 'authed') return children;\n  return null;\n}\n\n\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAEe,SAAS,WAAW,EAAE,QAAQ,EAAE;IAC7C,MAAM,SAAS,IAAA,gLAAS;IACxB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,+GAAQ,EAAC;IAErC,IAAA,gHAAS,EAAC;QACR,IAAI,UAAU;QACd,CAAC;YACC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,sKAAQ,CAAC,IAAI,CAAC,UAAU;YAC/C,IAAI,CAAC,SAAS;YACd,IAAI,MAAM,SAAS,UAAU;iBACxB;gBACH,UAAU;gBACV,OAAO,OAAO,CAAC;YACjB;QACF,CAAC;QACD,MAAM,EAAE,MAAM,GAAG,EAAE,GAAG,sKAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,IAAI;YACzD,IAAI,CAAC,SAAS;YACd,IAAI,SAAS,UAAU;iBAClB;gBACH,UAAU;gBACV,OAAO,OAAO,CAAC;YACjB;QACF;QACA,OAAO;YAAQ,UAAU;YAAO,KAAK,cAAc;QAAe;IACpE,GAAG;QAAC;KAAO;IAEX,IAAI,WAAW,WAAW;QACxB,qBACE,qKAAC;YAAI,WAAU;sBACb,cAAA,qKAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,IAAI,WAAW,UAAU,OAAO;IAChC,OAAO;AACT"}},
    {"offset": {"line": 312, "column": 0}, "map": {"version":3,"sources":["file:///Users/daveonthetrack/Projects/Finote%20Loza/finote-loza-school/pages/admin/photos/index.js"],"sourcesContent":["import AdminLayout from '@/components/AdminLayout';\nimport AdminGuard from '@/components/AdminGuard';\nimport { useEffect, useState } from 'react';\nimport { supabase } from '@/lib/supabaseClient';\nimport Link from 'next/link';\n\nexport default function PhotosAdmin() {\n  const [photos, setPhotos] = useState([]);\n  const [uploading, setUploading] = useState(false);\n  const [caption, setCaption] = useState('');\n\n  useEffect(() => { load(); }, []);\n\n  async function load() {\n    const { data } = await supabase.from('photos').select('*').order('created_at', { ascending: false });\n    setPhotos(data || []);\n  }\n\n  async function handleUpload(e) {\n    const file = e.target.files?.[0];\n    if (!file) return;\n    setUploading(true);\n    const filePath = `${Date.now()}_${file.name}`;\n    const { error: uploadError } = await supabase.storage.from('gallery').upload(filePath, file, { upsert: true, cacheControl: '3600', contentType: file.type });\n    if (uploadError) { alert(uploadError.message); setUploading(false); return; }\n    const { data: publicUrl } = supabase.storage.from('gallery').getPublicUrl(filePath);\n    const { error: insertError } = await supabase.from('photos').insert({ filename: file.name, url: publicUrl.publicUrl, caption });\n    if (insertError) { alert(insertError.message); }\n    setCaption('');\n    setUploading(false);\n    load();\n  }\n\n  async function remove(id) {\n    if (!confirm('Delete this photo?')) return;\n    await supabase.from('photos').delete().eq('id', id);\n    load();\n  }\n\n  return (\n    <AdminGuard>\n      <AdminLayout>\n        <div className=\"py-2\">\n          <div className=\"flex justify-between items-center mb-6\">\n            <h1 className=\"heading-section\">Manage Photos</h1>\n            <Link href=\"/admin/add-sample-photos\" className=\"btn-secondary\">\n              Add Sample Photos\n            </Link>\n          </div>\n          <div className=\"mt-6 card p-4 flex flex-col sm:flex-row items-start sm:items-end gap-3\">\n            <div className=\"flex-1\">\n              <label className=\"block text-sm font-medium\">Caption (optional)</label>\n              <input className=\"mt-1 w-full rounded-md border-gray-300\" value={caption} onChange={(e)=>setCaption(e.target.value)} />\n            </div>\n            <label className=\"btn-primary cursor-pointer\">\n              {uploading ? 'Uploading...' : 'Upload Photo'}\n              <input type=\"file\" accept=\"image/*\" className=\"hidden\" onChange={handleUpload} disabled={uploading} />\n            </label>\n          </div>\n          <div className=\"mt-8 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n            {photos.map((p) => (\n              <div key={p.id} className=\"relative\">\n                <img src={p.url} alt={p.caption || p.filename} className=\"rounded-lg shadow-soft w-full aspect-[4/3] object-cover\" />\n                <div className=\"mt-2 flex items-center justify-between text-sm\">\n                  <span className=\"truncate\">{p.caption || p.filename}</span>\n                  <button onClick={() => remove(p.id)} className=\"text-red-600\">Delete</button>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </AdminLayout>\n    </AdminGuard>\n  );\n}\n\n\n"],"names":[],"mappings":"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"}}]
}