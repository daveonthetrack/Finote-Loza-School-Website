{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/daveonthetrack/Projects/Finote%20Loza/finote-loza-school/components/AdminLayout.js"],"sourcesContent":["import Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport { supabase } from '@/lib/supabaseClient';\n\nfunction NavLink({ href, label }) {\n  const router = useRouter();\n  const active = router.asPath.startsWith(href);\n  return (\n    <Link\n      href={href}\n      className={\n        'block rounded-md px-3 py-2 text-sm ' +\n        (active ? 'bg-navy-700 text-white' : 'text-navy-900 hover:bg-navy-100')\n      }\n    >\n      {label}\n    </Link>\n  );\n}\n\nexport default function AdminLayout({ children }) {\n  async function signOut() {\n    await supabase.auth.signOut();\n    window.location.href = '/admin/login';\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-[240px,1fr] gap-6\">\n          <aside className=\"bg-white border border-gray-100 rounded-xl shadow-soft p-4 h-max sticky top-6\">\n            <p className=\"font-display text-lg text-navy-800\">Admin</p>\n            <nav className=\"mt-3 space-y-1\">\n              <NavLink href=\"/admin/dashboard\" label=\"Dashboard\" />\n              <NavLink href=\"/admin/articles\" label=\"Articles\" />\n              <NavLink href=\"/admin/events\" label=\"Events\" />\n              <NavLink href=\"/admin/photos\" label=\"Photos\" />\n              <NavLink href=\"/admin/students\" label=\"Students\" />\n                      <NavLink href=\"/admin/teachers\" label=\"Teachers\" />\n                      <NavLink href=\"/admin/parents\" label=\"Parents\" />\n                      <NavLink href=\"/admin/applications\" label=\"Applications\" />\n              <NavLink href=\"/admin/announcements\" label=\"Announcements\" />\n              <NavLink href=\"/admin/assignments\" label=\"Assignments\" />\n              <NavLink href=\"/admin/grades\" label=\"Grades\" />\n              <NavLink href=\"/admin/teacher-debug\" label=\"Teacher Debug\" />\n              <NavLink href=\"/admin/content\" label=\"Content\" />\n              <NavLink href=\"/admin/content-settings\" label=\"Content Settings\" />\n              <NavLink href=\"/admin/settings\" label=\"Settings\" />\n            </nav>\n            <button onClick={signOut} className=\"mt-4 w-full rounded-md border px-3 py-2 text-sm\">Sign out</button>\n          </aside>\n          <main>{children}</main>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAEA,SAAS,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE;IAC9B,MAAM,SAAS,IAAA,gLAAS;IACxB,MAAM,SAAS,OAAO,MAAM,CAAC,UAAU,CAAC;IACxC,qBACE,qKAAC,4KAAI;QACH,MAAM;QACN,WACE,wCACA,CAAC,SAAS,2BAA2B,iCAAiC;kBAGvE;;;;;;AAGP;AAEe,SAAS,YAAY,EAAE,QAAQ,EAAE;IAC9C,eAAe;QACb,MAAM,sKAAQ,CAAC,IAAI,CAAC,OAAO;QAC3B,OAAO,QAAQ,CAAC,IAAI,GAAG;IACzB;IAEA,qBACE,qKAAC;QAAI,WAAU;kBACb,cAAA,qKAAC;YAAI,WAAU;sBACb,cAAA,qKAAC;gBAAI,WAAU;;kCACb,qKAAC;wBAAM,WAAU;;0CACf,qKAAC;gCAAE,WAAU;0CAAqC;;;;;;0CAClD,qKAAC;gCAAI,WAAU;;kDACb,qKAAC;wCAAQ,MAAK;wCAAmB,OAAM;;;;;;kDACvC,qKAAC;wCAAQ,MAAK;wCAAkB,OAAM;;;;;;kDACtC,qKAAC;wCAAQ,MAAK;wCAAgB,OAAM;;;;;;kDACpC,qKAAC;wCAAQ,MAAK;wCAAgB,OAAM;;;;;;kDACpC,qKAAC;wCAAQ,MAAK;wCAAkB,OAAM;;;;;;kDAC9B,qKAAC;wCAAQ,MAAK;wCAAkB,OAAM;;;;;;kDACtC,qKAAC;wCAAQ,MAAK;wCAAiB,OAAM;;;;;;kDACrC,qKAAC;wCAAQ,MAAK;wCAAsB,OAAM;;;;;;kDAClD,qKAAC;wCAAQ,MAAK;wCAAuB,OAAM;;;;;;kDAC3C,qKAAC;wCAAQ,MAAK;wCAAqB,OAAM;;;;;;kDACzC,qKAAC;wCAAQ,MAAK;wCAAgB,OAAM;;;;;;kDACpC,qKAAC;wCAAQ,MAAK;wCAAuB,OAAM;;;;;;kDAC3C,qKAAC;wCAAQ,MAAK;wCAAiB,OAAM;;;;;;kDACrC,qKAAC;wCAAQ,MAAK;wCAA0B,OAAM;;;;;;kDAC9C,qKAAC;wCAAQ,MAAK;wCAAkB,OAAM;;;;;;;;;;;;0CAExC,qKAAC;gCAAO,SAAS;gCAAS,WAAU;0CAAkD;;;;;;;;;;;;kCAExF,qKAAC;kCAAM;;;;;;;;;;;;;;;;;;;;;;AAKjB"}},
    {"offset": {"line": 248, "column": 0}, "map": {"version":3,"sources":["file:///Users/daveonthetrack/Projects/Finote%20Loza/finote-loza-school/components/AdminGuard.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useRouter } from 'next/router';\nimport { supabase } from '@/lib/supabaseClient';\n\nexport default function AdminGuard({ children }) {\n  const router = useRouter();\n  const [status, setStatus] = useState('loading');\n\n  useEffect(() => {\n    let mounted = true;\n    (async () => {\n      const { data } = await supabase.auth.getSession();\n      if (!mounted) return;\n      if (data?.session) setStatus('authed');\n      else {\n        setStatus('anon');\n        router.replace('/admin/login');\n      }\n    })();\n    const { data: sub } = supabase.auth.onAuthStateChange((_e, session) => {\n      if (!mounted) return;\n      if (session) setStatus('authed');\n      else {\n        setStatus('anon');\n        router.replace('/admin/login');\n      }\n    });\n    return () => { mounted = false; sub?.subscription?.unsubscribe(); };\n  }, [router]);\n\n  if (status === 'loading') {\n    return (\n      <div className=\"min-h-[40vh] flex items-center justify-center\">\n        <div className=\"h-8 w-8 rounded-full border-4 border-navy-200 border-t-gold-500 animate-spin\" />\n      </div>\n    );\n  }\n\n  if (status === 'authed') return children;\n  return null;\n}\n\n\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAEe,SAAS,WAAW,EAAE,QAAQ,EAAE;IAC7C,MAAM,SAAS,IAAA,gLAAS;IACxB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,+GAAQ,EAAC;IAErC,IAAA,gHAAS,EAAC;QACR,IAAI,UAAU;QACd,CAAC;YACC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,sKAAQ,CAAC,IAAI,CAAC,UAAU;YAC/C,IAAI,CAAC,SAAS;YACd,IAAI,MAAM,SAAS,UAAU;iBACxB;gBACH,UAAU;gBACV,OAAO,OAAO,CAAC;YACjB;QACF,CAAC;QACD,MAAM,EAAE,MAAM,GAAG,EAAE,GAAG,sKAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,IAAI;YACzD,IAAI,CAAC,SAAS;YACd,IAAI,SAAS,UAAU;iBAClB;gBACH,UAAU;gBACV,OAAO,OAAO,CAAC;YACjB;QACF;QACA,OAAO;YAAQ,UAAU;YAAO,KAAK,cAAc;QAAe;IACpE,GAAG;QAAC;KAAO;IAEX,IAAI,WAAW,WAAW;QACxB,qBACE,qKAAC;YAAI,WAAU;sBACb,cAAA,qKAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,IAAI,WAAW,UAAU,OAAO;IAChC,OAAO;AACT"}},
    {"offset": {"line": 312, "column": 0}, "map": {"version":3,"sources":["file:///Users/daveonthetrack/Projects/Finote%20Loza/finote-loza-school/pages/admin/announcements/index.js"],"sourcesContent":["import AdminLayout from '@/components/AdminLayout';\nimport AdminGuard from '@/components/AdminGuard';\nimport { useEffect, useState } from 'react';\nimport { supabase } from '@/lib/supabaseClient';\nimport Link from 'next/link';\n\nexport default function AdminAnnouncements() {\n  const [announcements, setAnnouncements] = useState([]);\n\n  useEffect(() => { load(); }, []);\n\n  async function load() {\n    const { data } = await supabase\n      .from('announcements')\n      .select('*')\n      .order('created_at', { ascending: false });\n    setAnnouncements(data || []);\n  }\n\n  async function toggleActive(id, active) {\n    await supabase.from('announcements').update({ active: !active }).eq('id', id);\n    load();\n  }\n\n  async function remove(id) {\n    if (!confirm('Delete this announcement?')) return;\n    await supabase.from('announcements').delete().eq('id', id);\n    load();\n  }\n\n  return (\n    <AdminGuard>\n      <AdminLayout>\n        <div className=\"py-2\">\n          <div className=\"flex items-center justify-between\">\n            <h1 className=\"heading-section\">Announcements</h1>\n            <Link href=\"/admin/announcements/new\" className=\"btn-primary\">New Announcement</Link>\n          </div>\n\n          <div className=\"mt-6 space-y-3\">\n            {announcements.map((a) => (\n              <div key={a.id} className=\"card p-4 flex items-start justify-between gap-4\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-2\">\n                    <span className={`px-2 py-0.5 rounded text-xs ${a.level === 'warning' ? 'bg-yellow-100 text-yellow-800' : a.level === 'error' ? 'bg-red-100 text-red-800' : 'bg-blue-100 text-blue-800'}`}>{a.level}</span>\n                    {!a.active && <span className=\"px-2 py-0.5 rounded text-xs bg-gray-100 text-gray-700\">inactive</span>}\n                  </div>\n                  <h3 className=\"font-semibold text-lg mt-1\">{a.title}</h3>\n                  <p className=\"text-gray-600 text-sm mt-1\">{a.message}</p>\n                  <p className=\"text-xs text-gray-500 mt-2\">{a.starts_at ? new Date(a.starts_at).toLocaleString() : ''} {a.ends_at ? `â†’ ${new Date(a.ends_at).toLocaleString()}` : ''}</p>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <Link href={`/admin/announcements/${a.id}`} className=\"text-navy-700\">Edit</Link>\n                  <button onClick={() => toggleActive(a.id, a.active)} className=\"text-gold-700\">{a.active ? 'Deactivate' : 'Activate'}</button>\n                  <button onClick={() => remove(a.id)} className=\"text-red-600\">Delete</button>\n                </div>\n              </div>\n            ))}\n            {announcements.length === 0 && (\n              <div className=\"card p-6 text-center text-gray-600\">No announcements yet.</div>\n            )}\n          </div>\n        </div>\n      </AdminLayout>\n    </AdminGuard>\n  );\n}\n\n\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;;;;;;;AAEe,SAAS;IACtB,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,+GAAQ,EAAC,EAAE;IAErD,IAAA,gHAAS,EAAC;QAAQ;IAAQ,GAAG,EAAE;IAE/B,eAAe;QACb,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,sKAAQ,CAC5B,IAAI,CAAC,iBACL,MAAM,CAAC,KACP,KAAK,CAAC,cAAc;YAAE,WAAW;QAAM;QAC1C,iBAAiB,QAAQ,EAAE;IAC7B;IAEA,eAAe,aAAa,EAAE,EAAE,MAAM;QACpC,MAAM,sKAAQ,CAAC,IAAI,CAAC,iBAAiB,MAAM,CAAC;YAAE,QAAQ,CAAC;QAAO,GAAG,EAAE,CAAC,MAAM;QAC1E;IACF;IAEA,eAAe,OAAO,EAAE;QACtB,IAAI,CAAC,QAAQ,8BAA8B;QAC3C,MAAM,sKAAQ,CAAC,IAAI,CAAC,iBAAiB,MAAM,GAAG,EAAE,CAAC,MAAM;QACvD;IACF;IAEA,qBACE,qKAAC,wKAAU;kBACT,cAAA,qKAAC,yKAAW;sBACV,cAAA,qKAAC;gBAAI,WAAU;;kCACb,qKAAC;wBAAI,WAAU;;0CACb,qKAAC;gCAAG,WAAU;0CAAkB;;;;;;0CAChC,qKAAC,4KAAI;gCAAC,MAAK;gCAA2B,WAAU;0CAAc;;;;;;;;;;;;kCAGhE,qKAAC;wBAAI,WAAU;;4BACZ,cAAc,GAAG,CAAC,CAAC,kBAClB,qKAAC;oCAAe,WAAU;;sDACxB,qKAAC;4CAAI,WAAU;;8DACb,qKAAC;oDAAI,WAAU;;sEACb,qKAAC;4DAAK,WAAW,CAAC,4BAA4B,EAAE,EAAE,KAAK,KAAK,YAAY,kCAAkC,EAAE,KAAK,KAAK,UAAU,4BAA4B,6BAA6B;sEAAG,EAAE,KAAK;;;;;;wDAClM,CAAC,EAAE,MAAM,kBAAI,qKAAC;4DAAK,WAAU;sEAAwD;;;;;;;;;;;;8DAExF,qKAAC;oDAAG,WAAU;8DAA8B,EAAE,KAAK;;;;;;8DACnD,qKAAC;oDAAE,WAAU;8DAA8B,EAAE,OAAO;;;;;;8DACpD,qKAAC;oDAAE,WAAU;;wDAA8B,EAAE,SAAS,GAAG,IAAI,KAAK,EAAE,SAAS,EAAE,cAAc,KAAK;wDAAG;wDAAE,EAAE,OAAO,GAAG,CAAC,EAAE,EAAE,IAAI,KAAK,EAAE,OAAO,EAAE,cAAc,IAAI,GAAG;;;;;;;;;;;;;sDAEnK,qKAAC;4CAAI,WAAU;;8DACb,qKAAC,4KAAI;oDAAC,MAAM,CAAC,qBAAqB,EAAE,EAAE,EAAE,EAAE;oDAAE,WAAU;8DAAgB;;;;;;8DACtE,qKAAC;oDAAO,SAAS,IAAM,aAAa,EAAE,EAAE,EAAE,EAAE,MAAM;oDAAG,WAAU;8DAAiB,EAAE,MAAM,GAAG,eAAe;;;;;;8DAC1G,qKAAC;oDAAO,SAAS,IAAM,OAAO,EAAE,EAAE;oDAAG,WAAU;8DAAe;;;;;;;;;;;;;mCAbxD,EAAE,EAAE;;;;;4BAiBf,cAAc,MAAM,KAAK,mBACxB,qKAAC;gCAAI,WAAU;0CAAqC;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOlE"}}]
}